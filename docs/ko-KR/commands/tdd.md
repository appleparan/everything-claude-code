---
description: Enforce test-driven development workflow. Scaffold interfaces, generate tests FIRST, then implement minimal code to pass. Ensure 80%+ coverage.
---

# TDD 명령어

이 명령어는 **tdd-guide** Agent를 호출하여 테스트 주도 개발 방법론을 적용합니다.

## 이 명령어의 기능

1. **인터페이스 골격 생성** - 타입/인터페이스를 먼저 정의
2. **테스트 먼저 생성** - 실패하는 테스트 작성 (RED)
3. **최소한의 코드 구현** - 테스트를 통과시키는 데 충분한 코드만 작성 (GREEN)
4. **리팩터링** - 테스트가 통과하는 상태를 유지하면서 코드 개선 (REFACTOR)
5. **커버리지 검증** - 80% 이상 테스트 커버리지 보장

## 언제 사용하나요

다음과 같은 경우 `/tdd`를 사용하세요:
- 새로운 기능을 구현할 때
- 새로운 함수/컴포넌트를 추가할 때
- 버그를 수정할 때 (먼저 버그를 재현하는 테스트 작성)
- 기존 코드를 리팩터링할 때
- 핵심 비즈니스 로직을 구축할 때

## 작동 방식

tdd-guide Agent는:

1. **인터페이스를 정의**하여 입력/출력 설정
2. **실패하는 테스트 작성** (코드가 아직 존재하지 않으므로)
3. **테스트를 실행**하고 올바른 이유로 실패하는지 확인
4. **최소한의 구현 작성**으로 테스트 통과
5. **테스트를 실행**하고 통과하는지 확인
6. **코드를 리팩터링**, 테스트 통과 상태 유지
7. **커버리지를 확인**, 80% 미만이면 추가 테스트 작성

## TDD 사이클

```
RED → GREEN → REFACTOR → REPEAT

RED:      실패하는 테스트 작성
GREEN:    테스트를 통과시키는 최소한의 코드 작성
REFACTOR: 코드 개선, 테스트 통과 상태 유지
REPEAT:   다음 기능/시나리오
```

## TDD 모범 사례

**해야 할 것:**
- 구현 전에 항상 테스트를 먼저 작성
- 구현 전에 테스트를 실행하고 실패하는지 확인
- 테스트를 통과시키는 최소한의 코드 작성
- 테스트가 통과한 후에만 리팩터링
- 경계 케이스와 오류 시나리오 추가
- 80% 이상 커버리지 목표 (핵심 코드는 100%)

**하지 말아야 할 것:**
- 테스트 전에 구현 코드 작성
- 매 변경 후 테스트 실행 건너뛰기
- 한 번에 너무 많은 코드 작성
- 실패하는 테스트 무시
- 구현 세부사항 테스트 (동작을 테스트)
- 모든 것을 Mock (통합 테스트 우선)

## 커버리지 요구사항

- **모든 코드 최소 80%**
- **다음 유형은 100% 필요:**
  - 재무 계산
  - 유효성 검사 로직
  - 보안 관련 코드
  - 핵심 비즈니스 로직

## 중요 사항

**필수 요구사항**: 테스트는 반드시 구현 전에 작성해야 합니다. TDD 사이클은 다음과 같습니다:

1. **RED** - 실패하는 테스트 작성
2. **GREEN** - 구현하여 통과시키기
3. **REFACTOR** - 코드 개선

RED 단계를 절대 건너뛰지 마세요. 테스트 전에 코드를 절대 작성하지 마세요.

## 다른 명령어와의 통합

- 먼저 `/plan`을 사용하여 무엇을 구축할지 이해
- `/tdd`를 사용하여 테스트와 함께 구현
- 빌드 오류 발생 시 `/build-fix` 사용
- `/code-review`를 사용하여 구현 리뷰
- `/test-coverage`를 사용하여 커버리지 검증

## 관련 Agent

이 명령어는 다음 위치의 `tdd-guide` Agent를 호출합니다:
`~/.claude/agents/tdd-guide.md`

그리고 다음 위치의 `tdd-workflow` 스킬을 참고할 수 있습니다:
`~/.claude/skills/tdd-workflow/`
